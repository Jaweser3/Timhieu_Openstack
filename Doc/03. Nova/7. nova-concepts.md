## 1. Host aggreate vs Availability zone

### 1.1 Host aggregate

Là một cơ chế tạo ra một nhóm logic để phân vùng availability zone, `host aggregate` trong OPS tập hợp các Compute Node được chỉ định và liên kết với metadata. Trong khi các availability zones được hiển thị cho các users,`host aggregate` chỉ hiển thị cho Administrator. 

Host aggregates bắt đầu như cách sử dụng Xen hypervisor resource pools, nhưng đã được khái quát hóa để cung cấp cơ chế cho phép admin chỉ định key-value pairs cho các group. Mỗi node có thể có nhiều aggregates, mỗi aggregates có thể có nhiều key-value pairs, và các key-calue giống nhau có thể chỉ định cho nhiều aggregate. Thông tin này có thể đươc sử dụng trong scheduler để cho phép scheduling nâng cao, để thiết lập các xen hypervisor resources pools hoặc định nghĩa các logical groups cho migration. 

Các metadata trong các host aggregate thường được dùng để cung cấp thông tin cho quá trình nova-scheduler để xác định được được host đặt các mảy ảo . Metadata quy định trong một host aggretate sẽ chỉ định host chạy các instance mà có falvor cùng metadata

Người quản trị sử dụng host aggregate để xử lý cân bằng tải, dự phòng, resource pool ,nhóm các server cùng thuộc tính. Các host aggregate sẽ không được public ra cho các end-user mà thay đó sẽ được gắn vào các flavor.



### 1.2 Availability Zones (AZs)

`Availability Zones` là  visible logical abstraction của end-user cho việc phân vùng một đám mây mà không biết về kiến trúc hạ tầng vật lý của nó. 

Aggregates and availability zones:

* Một host có thể nằm trong nhiều aggregates, nhưng chỉ có thể thuộc về một availability zone
* Mặc định thì một host sẽ là thành viên của  default availability zone ngay cả khi nó không thuộc aggregate nào (tùy chọn cấu hình là `default_availability_zone`)

## Tham khảo

https://docs.openstack.org/nova/queens/user/aggregates.html

https://docs.openstack.org/nova/queens/admin/configuration/schedulers.html#host-aggregates